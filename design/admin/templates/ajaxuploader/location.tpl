{* DO NOT EDIT THIS FILE! Use an override template instead. *}
<form action={'ezjscore/call'|ezurl} method="post" class="ajaxuploader-location">
    <fieldset>
        {def
            $upload_class_map        = ezini( 'CreateSettings', 'MimeClassMap', 'upload.ini' )
            $upload_class_attribute  = ezini( concat( $upload_class_map['image'], '_ClassSettings' ), 'FileAttribute', 'upload.ini' )
            $alt_text_instructions   = ''
        }
        {if $class.identifier|eq( $upload_class_map['image'] )}
            {def
                $alt_text_label          = ''
                $alt_text_html_attribute = ''
            }
            {if $class.data_map[$upload_class_attribute].data_int2}
                {set
                    $alt_text_instructions   = " The alternative text field is required."|i18n( 'design/admin/ajaxuploader' )
                    $alt_text_label          = " (required)"|i18n( 'design/admin/ajaxuploader' )
                    $alt_text_html_attribute = ' required class="input-required"'
                }
            {/if}
            {set-block variable=$alt_text_field_set}
                <p>
                    <label for="alt_text_entry">Alternative text{$alt_text_label}:</label>
                    <input{$alt_text_html_attribute} id="UploadAlternativeText" name="UploadAlternativeText" size="70">
                </p>
            {/set-block}
        {else}
            {def $alt_text_field_set = ''}
        {/if}

        <legend>{"Step 2/3: Choose a location for the new '%class' object."|i18n( 'design/admin/ajaxuploader', '', hash( '%class', $class.name|wash() ) )}{$alt_text_instructions}</legend>
        <p>{'<em>%file</em> has successfully been uploaded.'|i18n( 'design/admin/ajaxupload', '', hash( '%file', $file.original_filename|wash() ) )}</p>

        {$alt_text_field_set}

        <p>{"Please choose a location for the '%class' object that is going to be created from it."|i18n( 'design/admin/ajaxuploader', '', hash( '%class', $class.name|wash() ) )}</p>
        <div class="ajaxuploader-browse">
            {include uri="design:ajaxuploader/browse.tpl" browse_start=$browse_start class=$class browse=$browse default_parent_node=$default_parent_node}
        </div>

        <p class="ajaxuploader-button-bar">
            <input type="hidden" name="UploadOriginalFilename" value="{$file.original_filename|wash()}" />
            <input type="hidden" name="UploadName" value="{$name|wash()}" />
            <input type="hidden" name="UploadFile" value="{$file.filename|wash()}" />
            <input type="submit" class="defaultbutton" value="{'Choose this location'|i18n( 'design/admin/ajaxuploader' )}" />
            <a href="#" class="window-cancel">{'Close'|i18n( 'design/admin/ajaxuploader' )}</a>
            <span class="ajaxuploader-error"></span>
        </p>
    </fieldset>
</form>
